const searchBox=document.getElementById("search-box"),searchResults=document.getElementById("search-results"),versionSelection=document.getElementById("version-selection");async function fetchSearchResults(e,t){return await fetch(`/search_endpoint/?query=${e}&version=${t}`).then((e=>e.json())).catch((e=>{console.log(e)}))}function updateResults(e){searchResults.innerHTML="";for(let t=0;t<e.length;t++){const n=e[t][0].substring(0,e[t][0].indexOf(" ")),s=e[t][0].substring(e[t][0].indexOf(" ")+1,e[t][0].indexOf(":")),c=`/goto/?version=${versionSelection.value}&book=${n}&chapter=${s}`,o=document.createElement("a");o.href=c,o.textContent=e[t][0];const a=document.createElement("li");a.appendChild(o),a.appendChild(document.createTextNode(` ${e[t][1]}`)),a.appendChild(document.createElement("br")),a.appendChild(document.createElement("br")),searchResults.appendChild(a)}}searchBox.addEventListener("input",(e=>{fetchSearchResults(searchBox.value,versionSelection.value).then((e=>{updateResults(e.results)})).catch((e=>{console.log(e)}))})),versionSelection.addEventListener("change",(e=>{fetchSearchResults(searchBox.value,versionSelection.value).then((e=>{updateResults(e.results)})).catch((e=>{console.log(e)}))})),searchResults.addEventListener("click",(function(e){if("LI"===e.target.tagName){const t=e.target.textContent.trim();document.cookie=`reference=${t}; path=/`}}));