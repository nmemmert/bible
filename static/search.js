const searchBox=document.getElementById("search-box"),searchResults=document.getElementById("search-results"),versionSelection=document.getElementById("version-selection");async function fetchSearchResults(e,t){return await fetch(`/search_endpoint/?query=${e}&version=${t}`).then((e=>e.json())).catch((e=>{console.log(e)}))}function updateResults(e){searchResults.innerHTML="";for(let t=0;t<e.length;t++){const n=e[t][0].substring(0,e[t][0].lastIndexOf(" ")),o=e[t][0].substring(e[t][0].lastIndexOf(" ")+1,e[t][0].indexOf(":")),s=`/goto/?version=${encodeURIComponent(versionSelection.value)}&book=${encodeURIComponent(n)}&chapter=${encodeURIComponent(o)}`,c=document.createElement("a");c.href=s,c.textContent=e[t][0];const l=document.createElement("li");l.appendChild(c),l.appendChild(document.createTextNode(` ${e[t][1]}`)),l.appendChild(document.createElement("br")),l.appendChild(document.createElement("br")),searchResults.appendChild(l)}}searchBox.addEventListener("input",(e=>{fetchSearchResults(searchBox.value,versionSelection.value).then((e=>{updateResults(e.results)})).catch((e=>{console.log(e)}))})),versionSelection.addEventListener("change",(e=>{fetchSearchResults(searchBox.value,versionSelection.value).then((e=>{updateResults(e.results)})).catch((e=>{console.log(e)}))}));