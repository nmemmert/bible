{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">
                    <h3 class="mb-0">ðŸ“– Create Study Guide</h3>
                </div>
                <div class="card-body">
                    <form method="POST">
                        {{ form.hidden_tag() }}
                        
                        <div class="form-group mb-3">
                            {{ form.title.label(class="form-label") }}
                            {{ form.title(class="form-control", placeholder="e.g., Study on Love, Psalms Deep Dive") }}
                            {% for error in form.title.errors %}
                                <div class="text-danger small">{{ error }}</div>
                            {% endfor %}
                        </div>
                        
                        <div class="form-group mb-3">
                            {{ form.description.label(class="form-label") }}
                            {{ form.description(class="form-control", placeholder="Brief description of what this study covers...") }}
                            {% for error in form.description.errors %}
                                <div class="text-danger small">{{ error }}</div>
                            {% endfor %}
                        </div>
                        
                        <div class="form-group mb-3">
                            <div class="form-check">
                                {{ form.is_public(class="form-check-input") }}
                                {{ form.is_public.label(class="form-check-label") }}
                            </div>
                            <small class="form-text text-muted">Public study guides can be viewed by other users</small>
                        </div>
                        
                        <div class="d-flex justify-content-between">
                            <a href="{{ url_for('study.study_guides') }}" class="btn btn-secondary">Cancel</a>
                            {{ form.submit(class="btn btn-primary") }}
                        </div>
                    </form>
                    
                    <hr class="my-4">
                    
                    <div class="study-templates">
                        <h5>Study Guide Templates</h5>
                        <p class="text-muted small">Get started with these common study patterns:</p>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <div class="card card-template" onclick="fillTemplate('character')">
                                    <div class="card-body">
                                        <h6 class="card-title">Character Study</h6>
                                        <p class="card-text small">Study biblical characters in depth</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="card card-template" onclick="fillTemplate('topical')">
                                    <div class="card-body">
                                        <h6 class="card-title">Topical Study</h6>
                                        <p class="card-text small">Explore themes across Scripture</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="card card-template" onclick="fillTemplate('chapter')">
                                    <div class="card-body">
                                        <h6 class="card-title">Chapter Study</h6>
                                        <p class="card-text small">Deep dive into specific chapters</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="card card-template" onclick="fillTemplate('book')">
                                    <div class="card-body">
                                        <h6 class="card-title">Book Overview</h6>
                                        <p class="card-text small">Survey entire books of the Bible</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function fillTemplate(templateType) {
    const titleInput = document.getElementById('title');
    const descriptionInput = document.getElementById('description');
    
    const templates = {
        character: {
            title: 'Character Study: [Name]',
            description: 'An in-depth study of [character name], exploring their background, key events, character traits, and lessons for today.'
        },
        topical: {
            title: 'Topical Study: [Theme]',
            description: 'A comprehensive study on [topic/theme], examining key passages and biblical principles throughout Scripture.'
        },
        chapter: {
            title: 'Chapter Study: [Book Chapter]',
            description: 'A detailed analysis of [book chapter], including context, key verses, themes, and practical applications.'
        },
        book: {
            title: 'Book Overview: [Book Name]',
            description: 'A survey of [book name], covering authorship, historical context, main themes, and key passages.'
        }
    };
    
    const template = templates[templateType];
    if (template) {
        titleInput.value = template.title;
        descriptionInput.value = template.description;
        titleInput.focus();
        titleInput.setSelectionRange(0, template.title.length);
    }
}

// Style for template cards
document.addEventListener('DOMContentLoaded', function() {
    const style = document.createElement('style');
        style.textContent = `
        .card-template {
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid var(--border-color);
        }
        .card-template:hover {
            border-color: var(--primary-accent);
            box-shadow: 0 2px 4px color-mix(in srgb, var(--primary-accent) 25%, transparent 75%);
            transform: translateY(-1px);
        }
        .card-template .card-body {
            padding: 12px;
        }
        .card-template .card-title {
            margin-bottom: 4px;
            color: var(--primary-accent);
        }
    `;
    document.head.appendChild(style);
});
</script>
{% endblock %}